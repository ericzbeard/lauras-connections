<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<meta name="theme-color" content="#0b0f14" />
<title>Connections Puzzle</title>
<style>
  :root{--bg:#0b0f14;--panel:#121923;--text:#e8eef6;--muted:#97a6ba;--accent:#4da3ff;--good:#4caf50;--warn:#ffca28;--bad:#ef5350;--chip:#1a2431;--shadow:0 10px 30px rgba(0,0,0,.35);--radius:16px}
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;background:radial-gradient(1200px 800px at 20% -10%,#16202d 0%,#0b0f14 55%) fixed;color:var(--text)}
  header{position:sticky;top:0;z-index:10;background:linear-gradient(0deg,rgba(11,15,20,.6),rgba(11,15,20,.9));backdrop-filter:blur(6px);border-bottom:1px solid #1c2a3f}
  .header-inner{max-width:980px;margin:0 auto;padding:10px 12px;display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:space-between}
  .logo{font-weight:800;font-size:clamp(18px,4.5vw,24px)}
  .controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  button{appearance:none;border:none;background:var(--chip);color:var(--text);padding:12px 14px;border-radius:12px;cursor:pointer;font-weight:700;box-shadow:var(--shadow);transition:transform .05s ease,background .2s ease,opacity .2s ease;min-height:44px;touch-action:manipulation}
  button:active{transform:translateY(1px)}
  button.ghost{background:transparent;border:1px solid #2b3a4f}
  button[disabled]{opacity:.5;pointer-events:none}
  main{max-width:980px;margin:8px auto 100px;padding:0 12px;display:block}
  .board{display:grid;gap:8px;grid-template-columns:repeat(4,1fr);background:rgba(255,255,255,.03);padding:8px;border-radius:var(--radius);box-shadow:var(--shadow)}
  .card{background:var(--panel);border:1px solid #223249;border-radius:14px;padding:10px;min-height:70px;display:flex;align-items:center;justify-content:center;text-align:center;font-weight:800;font-size:clamp(14px,3.7vw,18px);cursor:pointer;transition:transform .08s ease,background .2s ease,border-color .2s ease}
  .card.selected{outline:3px solid var(--accent);background:#0e223c;border-color:#355a87;transform:translateY(-1px)}
  .status-row{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .pill{background:var(--chip);color:var(--muted);padding:6px 10px;border-radius:999px;font-weight:700;font-size:12px}
  .actionbar{position:fixed;left:0;right:0;bottom:0;z-index:15;background:linear-gradient(0deg,rgba(11,15,20,.95),rgba(11,15,20,.7));backdrop-filter:blur(6px);border-top:1px solid #1c2a3f;padding:10px 12px calc(10px + env(safe-area-inset-bottom))}
  .actionbar .row{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px}
  .actionbar .row button{min-height:48px;font-size:16px}

  /* HOME GRID */
  .home{display:grid;gap:12px}
  .home[hidden]{display:none}
  .home h1{margin:.25rem 0 .25rem;font-size:clamp(20px,5vw,26px)}
  .home-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
  @media (max-width:520px){ .home-grid{grid-template-columns:repeat(3,1fr);} }
  .tile{background:rgba(255,255,255,.04);border:1px solid #223249;border-radius:14px;padding:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;min-height:72px;cursor:pointer;box-shadow:var(--shadow)}
  .tile .num{font-weight:900;font-size:18px}
  .tile .status{font-size:20px}
  .legend{display:flex;gap:10px;flex-wrap:wrap;color:var(--muted);font-size:13px}
  .legend .pill{font-size:12px}

  /* SOLVED GROUP BAR */
  .group{background:var(--panel);border-radius:14px;padding:14px;border-left:4px solid #43699e;margin-bottom:8px;box-shadow:var(--shadow)}
  .group .title{font-weight:900;font-size:16px;margin-bottom:6px;text-transform:uppercase;letter-spacing:.5px}
  .group .words{color:var(--muted);font-size:15px;line-height:1.5}

  /* RESULTS SCREEN */
  .results{display:grid;gap:12px}
  .results[hidden]{display:none}
  .results h1{margin:.25rem 0 .5rem;font-size:clamp(20px,5vw,26px)}
  .results-grid{display:flex;flex-direction:column;gap:6px;background:var(--panel);padding:16px;border-radius:var(--radius);box-shadow:var(--shadow)}
  .results-row{display:flex;gap:4px;font-size:28px;line-height:1}

  /* CONGRATULATIONS */
  .congrats{background:linear-gradient(135deg,#4caf50,#45a049);border-radius:var(--radius);padding:20px;text-align:center;margin-top:12px;box-shadow:var(--shadow);animation:slideIn 0.5s ease-out}
  .congrats[hidden]{display:none}
  .congrats-text{font-size:clamp(24px,6vw,32px);font-weight:900;color:#fff;margin-bottom:4px}
  .congrats-subtext{font-size:clamp(14px,3.5vw,18px);color:rgba(255,255,255,0.9)}
  @keyframes slideIn{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}

  /* FAILURE */
  .failure{background:linear-gradient(135deg,#ef5350,#e53935);border-radius:var(--radius);padding:20px;text-align:center;margin-top:12px;box-shadow:var(--shadow);animation:slideIn 0.5s ease-out}
  .failure[hidden]{display:none}
  .failure-text{font-size:clamp(24px,6vw,32px);font-weight:900;color:#fff;margin-bottom:4px}
  .failure-subtext{font-size:clamp(14px,3.5vw,18px);color:rgba(255,255,255,0.9)}

  /* INTRO SCREEN */
  .intro{display:grid;gap:12px;max-width:600px;margin:0 auto;padding-top:20px}
  .intro[hidden]{display:none}
  .christmas-tree{display:flex;flex-direction:column;gap:4px;align-items:center;background:var(--panel);padding:20px;border-radius:var(--radius);box-shadow:var(--shadow)}
  .tree-row{display:flex;gap:4px;font-size:28px;line-height:1;justify-content:center}
  .logo{cursor:pointer;user-select:none}
  .logo:hover{opacity:0.8}
</style>
</head>
<body>
<header>
  <div class="header-inner">
    <div class="logo" id="logo">üîó Laura's Connections</div>
    <div class="controls">
      <button id="homeBtn" class="ghost">üìã Puzzles</button>
      <button id="resetBtn" class="ghost">üîÑ Reset</button>
    </div>
  </div>
</header>
<main>
  <!-- INTRO SCREEN -->
  <section id="introScreen" class="intro" aria-label="Welcome screen">
    <h1 style="text-align:center;margin-bottom:16px">Merry Christmas, Laura!</h1>
    <p style="text-align:center;color:var(--muted);margin-bottom:24px;font-size:18px">I hope you enjoy these puzzles!</p>
    <div id="christmasTree" class="christmas-tree"></div>
    <div style="text-align:center;margin-top:24px">
      <button id="startBtn" style="min-height:48px;font-size:18px;padding:14px 28px">üéÑ Start Puzzles</button>
    </div>
  </section>

  <!-- SELECTOR (separate screen) -->
  <section id="homeScreen" class="home" aria-label="Puzzle selector" hidden>
    <h1>Select a puzzle</h1>
    <div class="legend">
      <span class="pill">‚¨ú Unsolved</span>
      <span class="pill">‚úÖ Solved</span>
      <span class="pill">‚úñÔ∏è Failed</span>
    </div>
    <div id="homeGrid" class="home-grid"></div>
  </section>

  <!-- GAME SCREEN -->
  <section id="gameScreen" hidden>
    <div id="board" class="board"></div>
    <div id="congrats" class="congrats" hidden>
      <div class="congrats-text">üéâ Awesome! üéâ</div>
      <div class="congrats-subtext">You solved the puzzle!</div>
    </div>
    <div id="failure" class="failure" hidden>
      <div class="failure-text">üòî Better luck next time!</div>
      <div class="failure-subtext">You've reached the maximum mistakes.</div>
    </div>
    <div id="resultsButtonWrapper" style="margin-top:12px;display:none">
      <button id="resultsBtn2" style="width:100%;min-height:48px;font-size:16px">üìä Show Results</button>
    </div>
    <div class="status-row">
      <div id="mistakes" class="pill">Mistakes: <b>0/4</b></div>
      <div id="puzzleId" class="pill">Puzzle: <b>-</b></div>
    </div>
  </section>

  <!-- RESULTS SCREEN -->
  <section id="resultsScreen" class="results" hidden>
    <h1>Results</h1>
    <div id="resultsGrid" class="results-grid"></div>
    <div style="margin-top:16px;display:flex;gap:8px;flex-wrap:wrap">
      <button id="copyResultsBtn">üìã Copy Results</button>
      <button id="backToGameBtn" class="ghost">‚Üê Back to Puzzle</button>
    </div>
  </section>
</main>

<div id="actionbar" class="actionbar" role="group" aria-label="Actions">
  <div class="row">
    <button id="submitBtn" class="primary">‚úÖ Submit</button>
    <button id="deselectBtn">üôÖ Deselect</button>
    <button id="shuffleBtn">üîÄ Shuffle</button>
  </div>
</div>

<div id="toast" class="toast" style="position:fixed;left:50%;transform:translateX(-50%);bottom:80px;background:#111a27;border:1px solid #223249;box-shadow:var(--shadow);color:var(--text);padding:10px 14px;border-radius:12px;display:none"></div>
<script src="game.js"></script>
</body>
</html>

